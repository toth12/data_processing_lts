	import json
import os
from pynlpl.formats import folia
import pdb

def process(units,doc_id):
    """Takes a python list consisting of dictionaries with units, and transforms into a folia xml file consisting of divisions
    :param untis: list of dictionaries with key unit
    :param doc_id: unique id to be given to the folia doc
    :return: folia xml in string format
    """

    #todo: add metadata to here


    #create a new folia document
    new_doc=folia.Document(id=doc_id)
    text=folia.Text(new_doc)
    #iterate through the input to create the folia division elements

    for unit in units:
        division=folia.Division(new_doc)
        division.settext(unit['unit'])
        text.add(division)
        new_doc.add(text)

    return new_doc.xmlstring()


if __name__ == "__main__":
    #read sample input
    with open(os.getcwd()+'/data/input/sample_input.json') as json_data:
        sample_data = json.load(json_data) 
    result=process(sample_data,'some_id')
    #save result with folia tool

    #create an xml document from the strig

    xml_to_save=folia.Document(string=result)

    #save it

    xml_to_save.save(os.getcwd()+'/data/output/sample_folia_divisions.xml')









